/* ==========================================================================
   SEMANTIC TYPOGRAPHY SYSTEM
   ==========================================================================
   This file defines typography presets that map to semantic roles in the UI.
   It connects primitive tokens to their semantic application in the interface.
*/

// SASS Module Imports
// --------------------------------------------------------------------------
@use 'sass:map';
@use 'sass:meta';
@use 'sass:string';

// Global Utilities and Variables
// --------------------------------------------------------------------------
@use '../../../global/g-variables' as glob_vars;
@use '../../../utils/u-mixtend' as u_mixtend; // Provides create-mixtend utility
@use '../../../utils/u-clamp' as u_clamp; // Provides fluid typography support

// Primitive Typography Definitions
// --------------------------------------------------------------------------
@use '../../primitive/typography/_p-typography-scale' as p_type-size; // Font sizes, line heights
@use '../../primitive/typography/_p-typography-properties' as p_type-props; // Font families, weights, etc.

// Semantic Typography Definitions
// --------------------------------------------------------------------------
@use '_s-typography-scale' as s_typo; // Responsive font size functions

/* ==========================================================================
   1. SEMANTIC TYPOGRAPHY PRESET CONFIGURATION
   ==========================================================================
   Each preset below defines a semantic text style that maps to primitive tokens.

   Structure of each preset:
   - font-size-key-mobile/desktop: Maps to size tokens in primitive typography
   - font-family-key: References font family ('display', 'heading', 'body', etc.)
   - font-weight-key: References weight token ('bold', 'regular', etc.)
   - letter-spacing-key: References tracking token ('normal', 'wide', etc.)
   - clamp-font-size: When true, enables fluid typography between breakpoints
   - text-transform: CSS text-transform property (uppercase, lowercase, etc.)
--------------------------------------------------------------------------- */

$SEMANTIC_TYPOGRAPHY_PRESETS: (
	// Large, impactful display text for heroes and major features
	display-a: (
			font-size-key-mobile: 700,
			font-size-key-desktop: 700,
			font-family-key: 'display',
			font-weight-key: 'bold',
			letter-spacing-key: 'tighter',
			clamp-font-size: true,
			text-transform: null
		),
	// Secondary display text for important sections
	display-b: (
			font-size-key-mobile: 600,
			font-size-key-desktop: 600,
			font-family-key: 'display',
			font-weight-key: 'bold',
			letter-spacing-key: 'tighter',
			clamp-font-size: true,
			text-transform: null
		),
	// Primary section titles and important headings
	title-a: (
			font-size-key-mobile: 500,
			font-size-key-desktop: 500,
			font-family-key: 'heading',
			font-weight-key: 'bold',
			letter-spacing-key: 'normal',
			clamp-font-size: true,
			text-transform: null
		),
	// Secondary section headings
	title-b: (
			font-size-key-mobile: 400,
			font-size-key-desktop: 400,
			font-family-key: 'heading',
			font-weight-key: 'semi-bold',
			letter-spacing-key: 'normal',
			clamp-font-size: true,
			text-transform: null
		),
	// Tertiary headings for subsections
	title-c: (
			font-size-key-mobile: 300,
			font-size-key-desktop: 300,
			font-family-key: 'heading',
			font-weight-key: 'semi-bold',
			letter-spacing-key: 'normal',
			clamp-font-size: true,
			text-transform: null
		),
	// Standard heading for content areas
	heading: (
			font-size-key-mobile: 400,
			font-size-key-desktop: 400,
			font-family-key: 'heading',
			font-weight-key: 'bold',
			letter-spacing-key: 'normal',
			clamp-font-size: true,
			text-transform: null
		),
	// Small heading or emphasized content label
	subheading: (
			font-size-key-mobile: 200,
			font-size-key-desktop: 200,
			font-family-key: 'body',
			font-weight-key: 'semi-bold',
			letter-spacing-key: 'normal',
			clamp-font-size: true,
			text-transform: null
		),
	// Standard body text for paragraphs and general content
	body: (
			font-size-key-mobile: 100,
			font-size-key-desktop: 100,
			font-family-key: 'body',
			font-weight-key: 'regular',
			letter-spacing-key: 'normal',
			clamp-font-size: true,
			text-transform: null
		),
	// Emphasized body text for quotes or highlighted content
	callout: (
			font-size-key-mobile: 200,
			font-size-key-desktop: 200,
			font-family-key: 'body',
			font-weight-key: 'regular',
			letter-spacing-key: 'normal',
			clamp-font-size: true,
			text-transform: null
		),
	// Text for form labels, buttons, and interactive elements
	label: (
			font-size-key-mobile: 50,
			font-size-key-desktop: 50,
			font-family-key: 'body',
			font-weight-key: 'medium',
			letter-spacing-key: 'wider',
			clamp-font-size: true,
			text-transform: null
		),
	// Small text for image captions and secondary information
	caption: (
			font-size-key-mobile: 50,
			font-size-key-desktop: 50,
			font-family-key: 'body',
			font-weight-key: 'regular',
			letter-spacing-key: 'normal',
			clamp-font-size: true,
			text-transform: null
		),
	// Very small text for auxiliary labels, typically uppercase
	overline: (
			font-size-key-mobile: 25,
			font-size-key-desktop: 25,
			font-family-key: 'body',
			font-weight-key: 'medium',
			letter-spacing-key: 'widest',
			clamp-font-size: true,
			text-transform: 'uppercase'
		)
) !default;

/* ==========================================================================
   2. GENERATE SEMANTIC TYPOGRAPHY UTILITIES (MIXINS & PLACEHOLDERS)
   ==========================================================================
   This section generates utility mixins and placeholders for each typography preset.
   These utilities can be used via @include or @extend throughout the project.
   -------------------------------------------------------------------------- */

// Generate placeholder selectors for each semantic typography preset
@each $semantic-name, $preset in $SEMANTIC_TYPOGRAPHY_PRESETS {
	// Extract values from the preset
	$font-size-key-mobile: map.get($preset, 'font-size-key-mobile');
	$font-size-key-desktop: map.get($preset, 'font-size-key-desktop');
	$font-family-key: map.get($preset, 'font-family-key');
	$font-weight-key: map.get($preset, 'font-weight-key');
	$letter-spacing-key: map.get($preset, 'letter-spacing-key');
	$clamp-font-size: map.get($preset, 'clamp-font-size');
	$text-transform: map.get($preset, 'text-transform');

	// Generate placeholder selector for this semantic style
	%text-#{$semantic-name} {
		// Set font family
		@if $font-family-key {
			font-family: p_type-props.get-font-family($font-family-key);
		}

		// Set font weight
		@if $font-weight-key {
			font-weight: p_type-props.get-font-weight($font-weight-key);
		}

		// Set letter spacing
		@if $letter-spacing-key {
			letter-spacing: p_type-props.get-letter-spacing($letter-spacing-key);
		}

		// Set text transform
		@if $text-transform {
			text-transform: $text-transform;
		}

		// Set font size with optional fluid scaling
		@if $clamp-font-size and $font-size-key-mobile != $font-size-key-desktop {
			// Use fluid typography when mobile and desktop sizes differ
			$mobile-size: p_type-size.get-font-size($font-size-key-mobile);
			$desktop-size: p_type-size.get-desktop-font-size($font-size-key-desktop);
			@if $mobile-size and $desktop-size {
				font-size: u_clamp.clamp-font-size($mobile-size, $desktop-size);
			}
		} @else if $font-size-key-mobile {
			// Use responsive font size from semantic scale (already handles mobile/desktop scaling)
			// Find the corresponding semantic ID from the semantic scale mapping
			@if $font-size-key-mobile == 25 {
				font-size: s_typo.get-responsive-font-size(100);
			} @else if $font-size-key-mobile == 50 {
				font-size: s_typo.get-responsive-font-size(200);
			} @else if $font-size-key-mobile == 100 {
				font-size: s_typo.get-responsive-font-size(300);
			} @else if $font-size-key-mobile == 200 {
				font-size: s_typo.get-responsive-font-size(400);
			} @else if $font-size-key-mobile == 300 {
				font-size: s_typo.get-responsive-font-size(500);
			} @else if $font-size-key-mobile == 400 {
				font-size: s_typo.get-responsive-font-size(600);
			} @else if $font-size-key-mobile == 500 {
				font-size: s_typo.get-responsive-font-size(700);
			} @else if $font-size-key-mobile == 600 {
				font-size: s_typo.get-responsive-font-size(800);
			} @else if $font-size-key-mobile == 700 {
				font-size: s_typo.get-responsive-font-size(900);
			} @else {
				// Fallback to single font size
				font-size: p_type-size.get-font-size($font-size-key-mobile);
			}
		}

		// Set line height based on font size
		@if $font-size-key-mobile {
			line-height: p_type-size.get-line-height($font-size-key-mobile);
		}
	}
}

/* ==========================================================================
   3. EXPORTS
   ==========================================================================
   The following variables are exposed for use in the public API.
   Important: All public APIs should be in the base layer instead of here.
   -------------------------------------------------------------------------- */

// Export the presets map for use in the public API
// $_SEMANTIC_TYPOGRAPHY_PRESETS is already defined with !default above
